<%- include ('../layouts/adminHeader.ejs') %>
  <%- include ('../layouts/adminMain.ejs') %>
  

    <!-- Content wrapper -->
    <div class="content-wrapper" >
      
      <!-- Content -->

      <div class="container-xxl flex-grow-1 container-p-y" >
        <div class="row" style="width: 150%;">
          <div class="col-lg-8 mb-4 order-0">
            <div class="card" >
              <div class="d-flex align-items-end row">
                <div class="col-sm-7">
                  <div class="card-body">
                    <h5 class="card-title text-primary">Welcome <%= admin.name %> ðŸŽ‰</h5>
                    <p class="mb-4">

                    </p>


                  </div>
                </div>
                <div class="col-sm-5 text-center text-sm-left">
                  
                </div>
              </div>
            </div>
          </div>
      
          <!-- Total Revenue -->
          <div class="col-12 col-lg-8 order-2 order-md-3 order-lg-2 mb-4">
            <div class="card">

              <div class="row">
                <div class="col-md-5">
                  <div class="card">
                    <canvas id="myPie"></canvas>
                  </div>
                </div>
                <div class="col-md-7">
                  <div class="card">
                    <canvas id="myChart"></canvas>

                  </div>
                </div>
                <input type="hidden" id="pname" value="<%=pdate%>">
                <input type="hidden" id="pcount" value="<%=pcount%>">
                <input type="hidden" id="ocount" value="<%=count%>">
                <input type="hidden" id="pdate" value="<%=pdate%>">
                <input type="hidden" id="category" value="<%=category%>">
                <input type="hidden" id="count" value="<%=count%>">
              </div>
             
            </div>
          </div>
          <!--/ Total Revenue -->

        </div>


        <div class="row">
          <div class="col-lg-3 col-sm-6">
            <div class="card">
              <div class="content">
                <div class="row">
                  <div class="col-xs-5">
                    <div class="icon-big icon-warning text-center">
                      <i class="ti-user"></i>
                    </div>
                  </div>
                  <div class="col-xs-7">
                    <div class="numbers">
                      <p>Users</p>
                      <%=usersCount%>
                    </div>
                  </div>
                </div>
               
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-sm-6">
            <div class="card">
              <div class="content">
                <div class="row">
                  <div class="col-xs-5">
                    <div class="icon-big icon-success text-center">
                      <i class="ti-layout-column3"></i>
                    </div>
                  </div>
                  <div class="col-xs-7">
                    <div class="numbers">
                      <p>Categories</p>
                      <%=totalCategory%>
                    </div>
                  </div>
                </div>
       
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-sm-6">
            <div class="card">
              <div class="content">
                <div class="row">
                  <div class="col-xs-5">
                    <div class="icon-big icon-danger text-center">
                      <i class="ti-shopping-cart"></i>
                    </div>
                  </div>
                  <div class="col-xs-7">
                    <div class="numbers">
                      <p>Total Products</p>
                      <%=productCount%>
                    </div>
                  </div>
                </div>
          
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-sm-6">
            <div class="card">
              <div class="content">
                <div class="row">
                  <div class="col-xs-5">
                    <div class="icon-big icon-info text-center">
                      <i class="ti-gift"></i>
                    </div>
                  </div>
                  <div class="col-xs-7">
                    <div class="numbers">
                      <p>Total Orders</p>
                      <%=showCount%>
                    </div>
                  </div>
                </div>
       
              </div>
            </div>
          </div>
        </div>


        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <script>
          const ctx = document.getElementById('myChart');
          const name = document.getElementById('pname');
          const count = document.getElementById('ocount');
          const date = document.getElementById('pdate');

          const pnames = name.value.split(',');
          const pcounts = count.value.split(',');
          const dates = date.value.split(',');

        


          new Chart(ctx, {
            type: 'bar',
            data: {
              labels: dates,
              datasets: [{
                label: 'sales',
                data: pcounts,
                borderWidth: 1
              }]
            },
            options: {
              scales: {
                y: {
                  beginAtZero: true,
                  ticks: {
                    precision: 0
                  }
                },
                x: {
                  title: {
                    display: true,
                    text: 'date',
                    data: dates,
                  },

                }
              }
            }
          });
        


          const ctx1 = document.getElementById('myPie');
          const name1 = document.getElementById('category');
          const count1 = document.getElementById('count');
          const category = name1.value.split(',');
          const countPie = count1.value.split(',');


          new Chart(ctx1, {
            type: 'pie',
            data: {
              labels: category,
              datasets: [{
                label: 'sales',
                data: countPie,
                borderWidth: 1
              }]
            },

          });
        </script>

      </div>
      <!-- / Content -->
      <style>
        body{
          overflow-x: hidden;
          margin-top: 0px;
        }
        .card{
          margin-top: -13px;
        }
      </style>

      <%- include ('../layouts/adminFooter.ejs') %>

   